## 1. 方案

### （1）磁盘分区策略  
- **分区构成**：  
  - **热点区**：分为热点1区和热点2区，分别由两个磁头管辖。  
  - **冗余区**：作为热点去和备份区之间的补充区域，应对热点区或备份区数据溢出的异常状况。  
  - **冷数据区（备份区）**：存放文件副本的部分，约占总区域的 2/3，不进行读取。  
- **热点区细分 tag 区**：  
  - 按照每个 tag 的预估最大占用空间，将热点区进一步划分为若干 tag 区。  
  - tag 区排序则依据各 tag 之间的读取频率相似度进行排列，方便后续顺序读取和连续调度。

### （2）写入策略  

- **磁盘选择**：  

  - 轮流在各个磁盘的热点1区和热点2区中写入。  
  - 副本则作为备份数据密集写入其他磁盘的备份区。  

- **tag 区域选择顺序**：  

  1. 优先写入能够最佳碎片匹配的对应 tag 区。
  2. 若没有最佳匹配，选择空闲区域能够写入的对应的 tag 区。  
  2. 若当前 tag 区满，则采用对向写入，写入相邻 tag 区（顺序上相对反向）。  
  3. 若对象 tag 区已满，则依次选取读取频率最近的区域。  
  4. 均无空闲空间，则写入到冗余区中。

- **对向写入机制**：

  - 相邻 tag 区采用对向写入。
  - 当前 tag 区已满时，反向写入到其他 tag 区。

### （3）读取策略  

- **磁头调度**：  

  - 每个磁头按照最优“rpj序列”（即以最低 token 消耗的顺序）单向顺序读取所负责区域内的数据。
  
### （4）Busy（过载）策略  

- **请求丢弃原则**：  

  - 当当前请求数接近阈值时，按请求数与阈值的比例 n ，丢弃当前读取频率最低的 m 个 tag 的请求，m 与 n 成线性关系。  
  - 但如果请求对象已经存在其它请求或其所在的磁盘块附近存在请求，则保留请求。

### （5）GC 策略  
- **当前状态**：暂未实现  
- **预期目标**：通过数据交换、重新布局来减少碎片化并进一步降低读取延迟。

---

## 2. 改进

### A. 磁盘分区策略



### B. 写入策略

  - 增加对动态冗余区的智能调度，冗余数据也能按 tag 聚集。

### C. 读取策略

- **实时调度优化**：  
  - 计算 jump 收益，动态调整磁头调度顺序，优先读取当前积压量较高、且物理上紧邻的区域。  

- **令牌消耗预测**：  
  - 建立一个更精细的令牌消耗预测模型，进一步降低读取过程中额外 token 消耗。

### D. Busy（过载）策略

**潜在改进点**  
- **多因子决策**：  
  - 除了基于 tag 读取频率之外，引入更多实时指标（如各 tag 的当前等待队列长度、请求响应时延等），形成多因子评价机制。  
  - 使用类似于优先队列或加权随机丢弃算法，根据请求的重要性和紧急程度进行更细粒度的决策。  

### E. GC（垃圾回收）策略

尚未实现

**预期改进方向**  
- **碎片整理与数据搬迁**：  
  - 结合实时读写数据和预处理的频率统计，设计针对性的数据交换策略，优化热点区域的连续性。  
  - 可以在 GC 时将连续但分散的热点数据重新聚合，同时清理不活跃的冷数据，释放连续空间。  
